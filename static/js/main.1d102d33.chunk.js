(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},75:function(e,t,c){},76:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(9),s=c.n(r),o=c(4),i=(c(29),c(30),c(0));var u=function(e){var t=e.onSubmit,c=Object(n.useState)(""),a=Object(o.a)(c,2),r=a[0],s=a[1];return Object(i.jsx)("header",{className:"Searchbar",children:Object(i.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),s("")):alert("please type your query")},children:[Object(i.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(i.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(i.jsx)("input",{className:"SearchForm-input",type:"text",value:r,onChange:function(e){s(e.target.value)},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},l=c(12),h=(c(32),c(21)),j=c(22),b=c(23),d=c.n(b),f=function(){function e(t,c){var n=this;Object(h.a)(this,e),this.searchImages=function(){var e="".concat(n.BASE_URL,"?q=").concat(n.searchQuery,"&page=").concat(n.page,"&key=").concat(n.API_KEY,"&image_type=photo&orientation=horizontal&per_page=").concat(n.perPage);return d.a.get(e).then((function(e){return e.data.hits})).catch((function(e){console.log(e)}))},this.BASE_URL=t,this.API_KEY=c,this._searchQuery="",this._page=1,this.perPage=12}return Object(j.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}}]),e}(),m=(c(51),function(e){var t=e.children;return Object(i.jsx)("ul",{className:"ImageGallery",children:t})}),g=(c(52),function(e){var t=e.searchResults,c=e.openModal;return Object(i.jsx)(i.Fragment,{children:t.length>0&&t.map((function(e){var t=e.id,n=e.webformatURL,a=e.tags;return Object(i.jsx)("li",{id:t,onClick:c,className:"ImageGalleryItem",children:Object(i.jsx)("img",{src:n,alt:a,className:"ImageGalleryItem-image"})},t)}))})}),O=(c(53),document.querySelector("#modal-wrapper"));var p=function(e){var t=e.onCloseModal,c=e.src,a=e.alt;Object(n.useEffect)((function(){return window.addEventListener("keydown",s),function(){window.removeEventListener("keydown",s)}}));var s=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(i.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(i.jsx)("div",{className:"Modal",children:Object(i.jsx)("img",{src:c,alt:a})})}),O)},x=(c(54),function(e){var t=e.onClick;return Object(i.jsx)("div",{className:"button-wrapper",children:Object(i.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})}),v=c(24),y=c.n(v),S=c(5);c(75);var w=function(e){var t=e.titleText,c=Object(n.useRef)(),a=Object(n.useCallback)((function(){S.a.to(".distort feDisplacementMap",1,{attr:{scale:50},ease:"circ.out"}),S.a.to(".distort feTurbulence",1,{attr:{baseFrequency:"2.08 .08"},ease:"circ.out"},1),S.a.to(c.current,1,{fontVariationSettings:"'wght' 650",ease:"back.out"})}),[]),r=Object(n.useCallback)((function(){S.a.to(".distort feDisplacementMap",1,{attr:{scale:0},ease:"circ.out"},1),S.a.to(".distort feTurbulence",1,{attr:{baseFrequency:"2.01 .01"},ease:"circ.out"},1),S.a.to(c.current,1,{fontVariationSettings:"'wght' 700",ease:"back.out"},1)}),[]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{className:"firstTitle",onMouseEnter:a,onMouseLeave:r,ref:c,children:t}),Object(i.jsx)("svg",{className:"distort",children:Object(i.jsxs)("filter",{id:"distortionFilter",children:[Object(i.jsx)("feTurbulence",{type:"fractalNoise",baseFrequency:"2.01 .01",numOctaves:"5",seed:"2",stitchTiles:"noStitch",x:"0%",y:"0%",width:"100%",height:"100%",result:"noise"}),Object(i.jsx)("feDisplacementMap",{in:"SourceGraphic",in2:"noise",scale:"0",xChannelSelector:"R",yChannelSelector:"B",x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"userSpaceOnUse"})]})})]})},N=(c(76),new f("https://pixabay.com/api/","23128758-78bb9bd788fc6e2a491c41576"));var k=function(e){var t=e.searchQuery,c=Object(n.useState)([]),a=Object(o.a)(c,2),r=a[0],s=a[1],u=Object(n.useState)("idle"),h=Object(o.a)(u,2),j=h[0],b=h[1],d=Object(n.useState)(null),f=Object(o.a)(d,2),O=f[0],v=f[1],S=Object(n.useState)(!1),k=Object(o.a)(S,2),F=k[0],I=k[1];Object(n.useEffect)((function(){t&&(b("pending"),N.searchQuery=t,N.searchImages().then((function(e){s(e),b("resolved")})).catch((function(e){console.log(e),b("rejected")})))}),[t]);var C=function(){return r.find((function(e){return e.id===O}))},E=r.length>0&&r.length>=12;return"idle"===j?Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)(w,{titleText:"Hello, I have a lot images for you. Just type your query to search\r form"})}):"pending"===j?Object(i.jsx)("div",{className:"loader-wrapper",children:Object(i.jsx)(y.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120})}):"rejected"===j?Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)("p",{children:"Error"})}):"resolved"===j?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m,{children:Object(i.jsx)(g,{searchResults:r,openModal:function(e){I(!0),v(Number(e.currentTarget.id))}})}),E&&Object(i.jsx)(x,{onClick:function(){N.page=1,N.searchImages().then((function(e){s((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e))})),b("resolved")})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){console.log(e),b("rejected")}))}}),0===r.length&&Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)("p",{children:"There are no images for your query"})}),F&&Object(i.jsx)(p,{largeImageId:O,onCloseModal:function(){I(!1)},src:C().largeImageURL,alt:C().tags})]}):void 0};var F=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(u,{onSubmit:function(e){a(e)}}),Object(i.jsx)(k,{searchQuery:c})]})};c(77);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(F,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.1d102d33.chunk.js.map