(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(8),o=n.n(r),s=n(4),i=(n(28),n(29),n(0));var u=function(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(s.a)(n,2),r=a[0],o=a[1];return Object(i.jsx)("header",{className:"Searchbar",children:Object(i.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r),o("")):alert("please type your query")},children:[Object(i.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(i.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(i.jsx)("input",{className:"SearchForm-input",type:"text",value:r,onChange:function(e){o(e.target.value)},autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})},l=n(11),h=(n(31),n(20)),j=n(21),d=n(22),b=n.n(d),m=function(){function e(t,n){var c=this;Object(h.a)(this,e),this.searchImages=function(){var e="".concat(c.BASE_URL,"?q=").concat(c.searchQuery,"&page=").concat(c.page,"&key=").concat(c.API_KEY,"&image_type=photo&orientation=horizontal&per_page=").concat(c.perPage);return b.a.get(e).then((function(e){return e.data.hits})).catch((function(e){console.log(e)}))},this.BASE_URL=t,this.API_KEY=n,this._searchQuery="",this._page=1,this.perPage=12}return Object(j.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}}]),e}(),f=(n(50),function(e){var t=e.children;return Object(i.jsx)("ul",{className:"ImageGallery",children:t})}),g=(n(51),function(e){var t=e.searchResults,n=e.openModal;return Object(i.jsx)(i.Fragment,{children:t.length>0&&t.map((function(e){var t=e.id,c=e.webformatURL,a=e.tags;return Object(i.jsx)("li",{id:t,onClick:n,className:"ImageGalleryItem",children:Object(i.jsx)("img",{src:c,alt:a,className:"ImageGalleryItem-image"})},t)}))})}),p=(n(52),document.querySelector("#modal-wrapper"));var O=function(e){var t=e.onCloseModal,n=e.src,a=e.alt;Object(c.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}}));var o=function(e){"Escape"===e.code&&t()};return Object(r.createPortal)(Object(i.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(i.jsx)("div",{className:"Modal",children:Object(i.jsx)("img",{src:n,alt:a})})}),p)},v=(n(53),function(e){var t=e.onClick;return Object(i.jsx)("div",{className:"button-wrapper",children:Object(i.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})}),y=n(23),x=n.n(y),S=(n(74),new m("https://pixabay.com/api/","23128758-78bb9bd788fc6e2a491c41576"));var w=function(e){var t=e.searchQuery,n=Object(c.useState)([]),a=Object(s.a)(n,2),r=a[0],o=a[1],u=Object(c.useState)("idle"),h=Object(s.a)(u,2),j=h[0],d=h[1],b=Object(c.useState)(null),m=Object(s.a)(b,2),p=m[0],y=m[1],w=Object(c.useState)(!1),N=Object(s.a)(w,2),k=N[0],I=N[1];Object(c.useEffect)((function(){t&&(d("pending"),S.searchQuery=t,S.searchImages().then((function(e){o(e),d("resolved")})).catch((function(e){console.log(e),d("rejected")})))}),[t]);var _=function(){return r.find((function(e){return e.id===p}))},E=r.length>0&&r.length>=12;return"idle"===j?Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)("p",{children:"Hello, I have a lot images for you. Just type your query to search form"})}):"pending"===j?Object(i.jsx)("div",{className:"loader-wrapper",children:Object(i.jsx)(x.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120})}):"rejected"===j?Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)("p",{children:"Error"})}):"resolved"===j?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(f,{children:Object(i.jsx)(g,{searchResults:r,openModal:function(e){I(!0),y(Number(e.currentTarget.id))}})}),E&&Object(i.jsx)(v,{onClick:function(){S.page=1,S.searchImages().then((function(e){o((function(t){return[].concat(Object(l.a)(t),Object(l.a)(e))})),d("resolved")})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){console.log(e),d("rejected")}))}}),0===r.length&&Object(i.jsx)("div",{className:"info-messages",children:Object(i.jsx)("p",{children:"There are no images for your query"})}),k&&Object(i.jsx)(O,{largeImageId:p,onCloseModal:function(){I(!1)},src:_().largeImageURL,alt:_().tags})]}):void 0};var N=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(u,{onSubmit:function(e){a(e)}}),Object(i.jsx)(w,{searchQuery:n})]})};n(75);o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(N,{})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.b5b94811.chunk.js.map